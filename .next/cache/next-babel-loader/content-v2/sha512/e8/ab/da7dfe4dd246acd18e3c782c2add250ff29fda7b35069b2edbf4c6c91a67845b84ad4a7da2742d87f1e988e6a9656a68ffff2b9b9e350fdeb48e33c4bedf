{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useMotionValue, useInvertedScale } from 'framer-motion';\nimport { useEffect } from 'react';\n/**\n * Avoid the stretch/squashing of border radius by using inverting them\n * throughout the component's layout transition.\n *\n * It would be possible to animate to/from different radius, for instance\n * in mobile mode from rounded to square for full-screen panels, by passing\n * the calculated inverted transform to `layoutTransition` when set as a function.\n *\n * Those inverted scales could be provided here to act as a `from` value,\n * then we can use Popcorn's `mix` function to get our\n *\n * @param radius\n */\n\nexport function useInvertedBorderRadius(radius) {\n  _s();\n\n  var scaleX = useMotionValue(1);\n  var scaleY = useMotionValue(1);\n  var inverted = useInvertedScale({\n    scaleX: scaleX,\n    scaleY: scaleY\n  });\n  var borderRadius = useMotionValue(\"\".concat(radius, \"px\"));\n  useEffect(function () {\n    function updateRadius() {\n      var latestX = inverted.scaleX.get();\n      var latestY = inverted.scaleY.get();\n      var xRadius = latestX * radius + 'px';\n      var yRadius = latestY * radius + 'px';\n      borderRadius.set(\"\".concat(xRadius, \" \").concat(yRadius));\n    }\n\n    var unsubScaleX = inverted.scaleX.onChange(updateRadius);\n    var unsubScaleY = inverted.scaleY.onChange(updateRadius);\n    return function () {\n      unsubScaleX();\n      unsubScaleY();\n    };\n  }, [radius]);\n  return {\n    scaleX: scaleX,\n    scaleY: scaleY,\n    borderTopLeftRadius: borderRadius,\n    borderTopRightRadius: borderRadius,\n    borderBottomLeftRadius: borderRadius,\n    borderBottomRightRadius: borderRadius\n  };\n}\n\n_s(useInvertedBorderRadius, \"l0IRq/XW3So76nAsuW2jD/SD4xI=\", false, function () {\n  return [useMotionValue, useMotionValue, useInvertedScale, useMotionValue];\n});","map":{"version":3,"sources":["/Users/fredo/Desktop/projects/sandbox-42/utils/use-inverted-border-radius.js"],"names":["useMotionValue","useInvertedScale","useEffect","useInvertedBorderRadius","radius","scaleX","scaleY","inverted","borderRadius","updateRadius","latestX","get","latestY","xRadius","yRadius","set","unsubScaleX","onChange","unsubScaleY","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"],"mappings":";;AAAA,SAASA,cAAT,EAAyBC,gBAAzB,QAAiD,eAAjD;AACA,SAASC,SAAT,QAA0B,OAA1B;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASC,uBAAT,CAAiCC,MAAjC,EAAyC;AAAA;;AAC9C,MAAMC,MAAM,GAAGL,cAAc,CAAC,CAAD,CAA7B;AACA,MAAMM,MAAM,GAAGN,cAAc,CAAC,CAAD,CAA7B;AACA,MAAMO,QAAQ,GAAGN,gBAAgB,CAAC;AAAEI,IAAAA,MAAM,EAANA,MAAF;AAAUC,IAAAA,MAAM,EAANA;AAAV,GAAD,CAAjC;AACA,MAAME,YAAY,GAAGR,cAAc,WAAII,MAAJ,QAAnC;AAEAF,EAAAA,SAAS,CAAC,YAAM;AACd,aAASO,YAAT,GAAwB;AACtB,UAAMC,OAAO,GAAGH,QAAQ,CAACF,MAAT,CAAgBM,GAAhB,EAAhB;AACA,UAAMC,OAAO,GAAGL,QAAQ,CAACD,MAAT,CAAgBK,GAAhB,EAAhB;AACA,UAAME,OAAO,GAAGH,OAAO,GAAGN,MAAV,GAAmB,IAAnC;AACA,UAAMU,OAAO,GAAGF,OAAO,GAAGR,MAAV,GAAmB,IAAnC;AAEAI,MAAAA,YAAY,CAACO,GAAb,WAAoBF,OAApB,cAA+BC,OAA/B;AACD;;AAED,QAAME,WAAW,GAAGT,QAAQ,CAACF,MAAT,CAAgBY,QAAhB,CAAyBR,YAAzB,CAApB;AACA,QAAMS,WAAW,GAAGX,QAAQ,CAACD,MAAT,CAAgBW,QAAhB,CAAyBR,YAAzB,CAApB;AAEA,WAAO,YAAM;AACXO,MAAAA,WAAW;AACXE,MAAAA,WAAW;AACZ,KAHD;AAID,GAjBQ,EAiBN,CAACd,MAAD,CAjBM,CAAT;AAmBA,SAAO;AACLC,IAAAA,MAAM,EAANA,MADK;AAELC,IAAAA,MAAM,EAANA,MAFK;AAGLa,IAAAA,mBAAmB,EAAEX,YAHhB;AAILY,IAAAA,oBAAoB,EAAEZ,YAJjB;AAKLa,IAAAA,sBAAsB,EAAEb,YALnB;AAMLc,IAAAA,uBAAuB,EAAEd;AANpB,GAAP;AAQD;;GAjCeL,uB;UACCH,c,EACAA,c,EACEC,gB,EACID,c","sourcesContent":["import { useMotionValue, useInvertedScale } from 'framer-motion';\nimport { useEffect } from 'react';\n\n/**\n * Avoid the stretch/squashing of border radius by using inverting them\n * throughout the component's layout transition.\n *\n * It would be possible to animate to/from different radius, for instance\n * in mobile mode from rounded to square for full-screen panels, by passing\n * the calculated inverted transform to `layoutTransition` when set as a function.\n *\n * Those inverted scales could be provided here to act as a `from` value,\n * then we can use Popcorn's `mix` function to get our\n *\n * @param radius\n */\nexport function useInvertedBorderRadius(radius) {\n  const scaleX = useMotionValue(1);\n  const scaleY = useMotionValue(1);\n  const inverted = useInvertedScale({ scaleX, scaleY });\n  const borderRadius = useMotionValue(`${radius}px`);\n\n  useEffect(() => {\n    function updateRadius() {\n      const latestX = inverted.scaleX.get();\n      const latestY = inverted.scaleY.get();\n      const xRadius = latestX * radius + 'px';\n      const yRadius = latestY * radius + 'px';\n\n      borderRadius.set(`${xRadius} ${yRadius}`);\n    }\n\n    const unsubScaleX = inverted.scaleX.onChange(updateRadius);\n    const unsubScaleY = inverted.scaleY.onChange(updateRadius);\n\n    return () => {\n      unsubScaleX();\n      unsubScaleY();\n    };\n  }, [radius]);\n\n  return {\n    scaleX,\n    scaleY,\n    borderTopLeftRadius: borderRadius,\n    borderTopRightRadius: borderRadius,\n    borderBottomLeftRadius: borderRadius,\n    borderBottomRightRadius: borderRadius,\n  };\n}\n"]},"metadata":{},"sourceType":"module"}